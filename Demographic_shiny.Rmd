---
title: "Demographic statistics for Alzheimer's Disease in the US"
output: 
  flexdashboard::flex_dashboard:
    orientation: row
runtime: shiny
---

```{r, include = FALSE, message = FALSE, warning = FALSE}
library(flexdashboard)

library(shiny)
library(readxl)
library(tidyverse)
library(usmap)
library(plotly)
library(ggplot2)
```

```{r, message = FALSE, warning = FALSE}
geo_data =
  read_csv("./Data/geo_data.csv") |>
  select(-...1)
```

Column {.sidebar}
-----------------------------------------------------------------------
```{r}
geo_type = geo_data |>
  select(-year) |>
  variable.names()

selectInput(
  "geo_type", 
  label = h3("Select geo type"),
  choices = geo_type, selected = "death_rate")

selectInput(
  "year", 
  label = h3("Select year"),
  choices = c(2018, 2019, 2020, 2021), selected = "2018")
```

Row
-----------------------------------------------------------------------
### Demographic visualizations
```{r}
renderPlotly({
  ggplotly(plot_usmap(data = geo_data |>
                        filter(year==input$year) |>
                        mutate(tate = order(state),
                               fips = pull(statepop, fips),
                               abbr = pull(statepop, abbr)),
           values = input$geo_type,
           labels = TRUE))
  })
```
